\hypertarget{peer_8h}{}\section{lib/peer.h File Reference}
\label{peer_8h}\index{lib/peer.\+h@{lib/peer.\+h}}
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$boost/asio.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/array.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/chrono.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/dynamic\+\_\+bitset.\+hpp$>$}\newline
{\ttfamily \#include $<$boost/thread.\+hpp$>$}\newline
{\ttfamily \#include \char`\"{}torrentparser.\+hpp\char`\"{}}\newline
Include dependency graph for peer.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{peer_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=232pt]{peer_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structpwp_1_1client__state}{pwp\+::client\+\_\+state}
\item 
struct \hyperlink{structpwp_1_1peer__state}{pwp\+::peer\+\_\+state}
\item 
struct \hyperlink{structpwp_1_1peer}{pwp\+::peer}
\item 
struct \hyperlink{structpwp_1_1peer__connection}{pwp\+::peer\+\_\+connection}
\item 
struct \hyperlink{structbInt}{b\+Int}
\end{DoxyCompactItemize}
\subsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \hyperlink{namespacepwp}{pwp}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{peer_8h_ac4f8a5810b63e63e2f2fe4642025530f}\label{peer_8h_ac4f8a5810b63e63e2f2fe4642025530f}} 
\#define {\bfseries D\+E\+F\+A\+U\+L\+T\+\_\+\+B\+U\+F\+F\+\_\+\+S\+I\+ZE}~128
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\+::shared\+\_\+ptr$<$ std\+::vector$<$ \hyperlink{structpwp_1_1peer}{pwp\+::peer} $>$ $>$ \hyperlink{namespacepwp_ad07fa6df116b205302ad5ec172277184}{pwp\+::\+Peer\+List}
\item 
\mbox{\Hypertarget{namespacepwp_a174e8f020062fa10258b0d28f00d79ff}\label{namespacepwp_a174e8f020062fa10258b0d28f00d79ff}} 
typedef std\+::shared\+\_\+ptr$<$ std\+::vector$<$ \hyperlink{structpwp_1_1peer__connection}{pwp\+::peer\+\_\+connection} $>$ $>$ {\bfseries pwp\+::\+Peer\+Connected}
\item 
\mbox{\Hypertarget{peer_8h_ad61558c1c2cfe845f0a80296761f4652}\label{peer_8h_ad61558c1c2cfe845f0a80296761f4652}} 
typedef struct \hyperlink{structbInt}{b\+Int} {\bfseries b\+Int}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{peer_8h_ab03bdb6193d51579d2e14c3fdf704b6d}\label{peer_8h_ab03bdb6193d51579d2e14c3fdf704b6d}} 
void {\bfseries add\+\_\+active\+\_\+peer} ()
\item 
\mbox{\Hypertarget{peer_8h_a536da2a1a4821536d1ae07a26a96e60a}\label{peer_8h_a536da2a1a4821536d1ae07a26a96e60a}} 
void {\bfseries rm\+\_\+active\+\_\+peer} ()
\item 
\mbox{\Hypertarget{namespacepwp_ab82c0d015f6ba23e766c4b942a125b5f}\label{namespacepwp_ab82c0d015f6ba23e766c4b942a125b5f}} 
void {\bfseries pwp\+::manage\+\_\+peer\+\_\+connection} (\hyperlink{namespacepwp_ad07fa6df116b205302ad5ec172277184}{pwp\+::\+Peer\+List} peer\+\_\+list, char $\ast$info\+\_\+hash)
\item 
\mbox{\Hypertarget{namespacepwp_a5f03cde749af88a393c999545830b192}\label{namespacepwp_a5f03cde749af88a393c999545830b192}} 
void {\bfseries pwp\+::get\+\_\+peer\+\_\+id} (std\+::string $\ast$id)
\item 
void \hyperlink{namespacepwp_a6062876f4d4d4d6ee19341a79a797864}{pwp\+::build\+\_\+handshake} (char $\ast$info\+\_\+hash, std\+::vector$<$ uint8\+\_\+t $>$ \&handshake)
\begin{DoxyCompactList}\small\item\em Create the handshake for a file. \end{DoxyCompactList}\item 
int \hyperlink{namespacepwp_a851ddc0e8fb2eb0a86317cc944c4a927}{pwp\+::send\+\_\+handshake} (\hyperlink{structpwp_1_1peer__connection}{pwp\+::peer\+\_\+connection} \&peerc\+\_\+t, const std\+::vector$<$ uint8\+\_\+t $>$ handshake, std\+::vector$<$ uint8\+\_\+t $>$ \&response)
\item 
\mbox{\Hypertarget{namespacepwp_ae2eeca61e271fabff5fa45308396009e}\label{namespacepwp_ae2eeca61e271fabff5fa45308396009e}} 
void {\bfseries pwp\+::handshake\+\_\+request\+\_\+manager} (const std\+::array$<$ char, 256 $>$ \&handshake, const \hyperlink{structpwp_1_1peer}{pwp\+::peer} t\+\_\+peer, const char $\ast$info\+\_\+hash, pwp\+::\+Peer\+Connected valid\+\_\+peer)
\item 
\mbox{\Hypertarget{namespacepwp_aed118903b8345e62507ade49c6032d32}\label{namespacepwp_aed118903b8345e62507ade49c6032d32}} 
int {\bfseries pwp\+::verify\+\_\+handshake} (const std\+::vector$<$ uint8\+\_\+t $>$ handshake, size\+\_\+t len, const \hyperlink{structpwp_1_1peer}{pwp\+::peer} t\+\_\+peer, const char $\ast$info\+\_\+hash)
\item 
void \hyperlink{namespacepwp_ae8331eb5e3c98deddc6022dad92352f6}{pwp\+::remove\+\_\+invalid\+\_\+peer} (\hyperlink{namespacepwp_ad07fa6df116b205302ad5ec172277184}{pwp\+::\+Peer\+List} peer\+\_\+list)
\begin{DoxyCompactList}\small\item\em Find invalid peers and remove it. \end{DoxyCompactList}\item 
void \hyperlink{namespacepwp_a62060bdcdc80541b0892e26fbeab1e91}{pwp\+::pwp\+\_\+protocol\+\_\+manager} (\hyperlink{structpwp_1_1peer}{pwp\+::peer} peer\+\_\+, const std\+::vector$<$ uint8\+\_\+t $>$ \&handshake, const char $\ast$info\+\_\+hash, \hyperlink{structtorr_1_1Torrent}{Torrent} \&torrent)
\begin{DoxyCompactList}\small\item\em Manager of the entire P\+WP protocol. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{peer_8h_a271dd525a536a4182946e975569203bd}\label{peer_8h_a271dd525a536a4182946e975569203bd}} 
uint32\+\_\+t {\bfseries make\+\_\+int} (\hyperlink{structbInt}{b\+Int} bint)
\item 
\mbox{\Hypertarget{peer_8h_ac8b17972b6cc91299003983c8699ea0e}\label{peer_8h_ac8b17972b6cc91299003983c8699ea0e}} 
uint32\+\_\+t {\bfseries make\+\_\+int} (std\+::vector$<$ uint8\+\_\+t $>$ v)
\item 
\mbox{\Hypertarget{peer_8h_aa53a54b161cc4fd1306d84759a358067}\label{peer_8h_aa53a54b161cc4fd1306d84759a358067}} 
std\+::vector$<$ uint8\+\_\+t $>$ {\bfseries from\+\_\+int\+\_\+to\+\_\+bint} (uint integer)
\item 
\mbox{\Hypertarget{peer_8h_ab5548d1ece514e6fb8ccc19528b39904}\label{peer_8h_ab5548d1ece514e6fb8ccc19528b39904}} 
std\+::vector$<$ uint8\+\_\+t $>$ {\bfseries from\+\_\+int64\+\_\+to\+\_\+bint} (uint64\+\_\+t integer)
\item 
std\+::string \hyperlink{peer_8h_a9a16c464cd63530a7fbd80134c32f264}{string\+\_\+to\+\_\+hex} (const std\+::vector$<$ uint8\+\_\+t $>$ \&input)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
boost\+::asio\+::io\+\_\+service \hyperlink{peer_8h_a7efe93eb3d4e0f0c9ab96fa5ae443fcd}{\+\_\+io\+\_\+service}
\item 
\mbox{\Hypertarget{peer_8h_afd3bb609482f388199b44f364c870321}\label{peer_8h_afd3bb609482f388199b44f364c870321}} 
int {\bfseries active\+\_\+peer}
\item 
boost\+::mutex \hyperlink{peer_8h_a821fac971970c19e5d4f57dd0486f019}{mtx\+\_\+peer\+\_\+num}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Peer\textquotesingle{}s data and P\+WP protocol interface

This define the basic P\+WP protocol structure along with peer interface 

\subsection{Function Documentation}
\mbox{\Hypertarget{peer_8h_a9a16c464cd63530a7fbd80134c32f264}\label{peer_8h_a9a16c464cd63530a7fbd80134c32f264}} 
\index{peer.\+h@{peer.\+h}!string\+\_\+to\+\_\+hex@{string\+\_\+to\+\_\+hex}}
\index{string\+\_\+to\+\_\+hex@{string\+\_\+to\+\_\+hex}!peer.\+h@{peer.\+h}}
\subsubsection{\texorpdfstring{string\+\_\+to\+\_\+hex()}{string\_to\_hex()}}
{\footnotesize\ttfamily std\+::string string\+\_\+to\+\_\+hex (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ uint8\+\_\+t $>$ \&}]{input }\end{DoxyParamCaption})}

Takes vector of bytes and print its H\+EX rappresentation


\begin{DoxyParams}{Parameters}
{\em input} & The bytes to convert \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An H\+EX string
\end{DoxyReturn}
T\+O\+DO rename this nonsense function name 

\subsection{Variable Documentation}
\mbox{\Hypertarget{peer_8h_a7efe93eb3d4e0f0c9ab96fa5ae443fcd}\label{peer_8h_a7efe93eb3d4e0f0c9ab96fa5ae443fcd}} 
\index{peer.\+h@{peer.\+h}!\+\_\+io\+\_\+service@{\+\_\+io\+\_\+service}}
\index{\+\_\+io\+\_\+service@{\+\_\+io\+\_\+service}!peer.\+h@{peer.\+h}}
\subsubsection{\texorpdfstring{\+\_\+io\+\_\+service}{\_io\_service}}
{\footnotesize\ttfamily boost\+::asio\+::io\+\_\+service \+\_\+io\+\_\+service}

Global I\+O-\/\+Service \mbox{\Hypertarget{peer_8h_a821fac971970c19e5d4f57dd0486f019}\label{peer_8h_a821fac971970c19e5d4f57dd0486f019}} 
\index{peer.\+h@{peer.\+h}!mtx\+\_\+peer\+\_\+num@{mtx\+\_\+peer\+\_\+num}}
\index{mtx\+\_\+peer\+\_\+num@{mtx\+\_\+peer\+\_\+num}!peer.\+h@{peer.\+h}}
\subsubsection{\texorpdfstring{mtx\+\_\+peer\+\_\+num}{mtx\_peer\_num}}
{\footnotesize\ttfamily boost\+::mutex mtx\+\_\+peer\+\_\+num}

Mutex for the alive peers number 